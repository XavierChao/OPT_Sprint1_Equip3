<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Intranet - OPT Sprint 1</title>
</head>
<body class="espai-intranet">
    <style>
        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh; /* Ocupa tota l'al√ßada de la pantalla */
            margin: 0;
        }

        main {
            flex: 1; /* Creix per ocupar tot l'espai disponible */
            display: flex; /* Per poder centrar els botons dins del main */
            flex-direction: column;
            justify-content: center; /* Centra verticalment */
            align-items: center;     /* Centra horitzontalment */
        }
        .menu-botons {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 25px;
            width: 100%;
        }

        /* Botons estil Intranet (Mantenim el teu disseny espec√≠fic) */
        .btn-intranet {
            background-color: #fe8828; /* taronja intranet */
            color: white;
            border: 3px solid #8b5e2f; 
            padding: 14px 28px;
            font-size: 1.3rem;
            font-weight: bold;
            border-radius: 10px;
            cursor: pointer;
            width: 200px;
            transition: 0.25s;
        }

        .btn-intranet:hover {
            background-color: #8b5e2f;
            color: #ffffff;
            transform: scale(1.05);
        }


        @media (max-width: 800px) {
            .flex-container {
                flex-direction: column;
            }
        }

        /* --- AFEGIR AQUESTS ESTILS NOUS --- */
        
        /* Classe per amagar pantalles */
        .hidden {
            display: none !important;
        }

        /* Estils per als quadres de formulari */
        .form-container {
            background-color: white;
            padding: 30px;
            border-radius: 15px;
            border: 3px solid #fe8828;
            width: 100%;
            max-width: 400px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            text-align: center;
        }

        .form-container h2 {
            color: #8b5e2f;
            margin-top: 0;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }

        .form-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
        }

        /* Botons verds (Enviar) i vermells (Enrere) */
        .btn-submit {
            background-color: #2ecc71;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            width: 100%;
            margin-top: 10px;
            font-size: 1.1rem;
        }
        
        .btn-enrere {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            width: 100%;
            margin-top: 10px;
        }

        /* Estil per a la pantalla final de la Intranet */
        .intranet-content {
            text-align: center;
            background-color: white;
            padding: 40px;
            border-radius: 15px;
            border: 2px dashed #fe8828;
            max-width: 600px;
        }
    </style>
        <div id="header-placeholder"></div>
        <script>
        fetch("header_intranet.html")
            .then(response => response.text())
            .then(data => {
                document.getElementById("header-placeholder").innerHTML = data;
            });
        </script>
<body>
    <header>
        <h1>Intranet</h1>
    </header>

    <nav>
        <ul>
            <li><a href="index.html">Inici</a></li>
            <li><a href="digitalitzacio.html">Digitalitzaci√≥</a></li>
            <li><a href="sostenibilitat.html">Sostenibilitat</a></li>
            <li><a href="intranet.html">Intranet</a></li>
        </ul>
    </nav>

    <main>
        <!-- 1. PANTALLA INICIAL (MEN√ö) - Li hem posat ID i onclicks -->
        <div id="screen-menu" class="menu-botons">
            <button class="btn-intranet" onclick="mostrarPantalla('screen-login')">Login</button>
            <button class="btn-intranet" onclick="mostrarPantalla('screen-registre')">Registre</button>
        </div>

        <!-- 2. PANTALLA LOGIN (Amagada) -->
        <div id="screen-login" class="form-container hidden">
            <h2>Acc√©s Usuaris</h2>
            <form id="form-login">
                <div class="form-group">
                    <label>Email:</label>
                    <input type="email" required placeholder="usuari@montsia30.net">
                </div>
                <div class="form-group">
                    <label>Contrasenya:</label>
                    <input type="password" required>
                </div>
                <button type="submit" class="btn-submit">Entrar</button>
                <button type="button" class="btn-enrere" onclick="mostrarPantalla('screen-menu')">Enrere</button>
            </form>
        </div>

        <!-- 3. PANTALLA REGISTRE (Amagada) -->
        <div id="screen-registre" class="form-container hidden">
            <h2>Nou Registre</h2>
            <form id="form-registre">
                <div class="form-group">
                    <label>Email (@montsia30.net):</label>
                    <input type="email" id="reg-email" required placeholder="exemple@montsia30.net">
                </div>
                <div class="form-group">
                    <label>Contrasenya (+8 car√†cters, Maj, Min, Num):</label>
                    <input type="password" id="reg-pass" required>
                </div>
                <button type="submit" class="btn-submit">Registrar-se</button>
                <button type="button" class="btn-enrere" onclick="mostrarPantalla('screen-menu')">Enrere</button>
            </form>
        </div>

        <!-- 4. PANTALLA FINAL INTRANET (Amagada) -->
        <div id="screen-intranet" class="intranet-content hidden">
            <h1>üëã Hola! Est√†s dins de la Intranet</h1>
            <p>Benvingut a l'√†rea privada.</p>
            <button class="btn-intranet" onclick="location.reload()">Tancar Sessi√≥</button>
        </div>
    </main>

    <script>
        // Funci√≥ per canviar entre pantalles
        function mostrarPantalla(idPantalla) {
            // Amaga totes
            document.getElementById('screen-menu').classList.add('hidden');
            document.getElementById('screen-login').classList.add('hidden');
            document.getElementById('screen-registre').classList.add('hidden');
            document.getElementById('screen-intranet').classList.add('hidden');

            // Mostra la que volem
            document.getElementById(idPantalla).classList.remove('hidden');
        }

        // L√íGICA DE REGISTRE (Validaci√≥ de contrasenya i email)
        document.getElementById('form-registre').addEventListener('submit', function(e) {
            e.preventDefault(); 

            const email = document.getElementById('reg-email').value;
            const pass = document.getElementById('reg-pass').value;

            // Validar domini Email
            const emailRegex = /^[a-zA-Z0-9._%+-]+@montsia30\.net$/;
            // Validar Password (8 chars, 1 Maj, 1 min, 1 num)
            const passRegex = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}$/;

            if (!emailRegex.test(email)) {
                alert("‚ùå Error: L'email ha de ser del domini @montsia30.net");
                return;
            }

            if (!passRegex.test(pass)) {
                alert("‚ùå Error: La contrasenya ha de tenir m√≠nim 8 car√†cters, una maj√∫scula, una min√∫scula i un n√∫mero.");
                return;
            }

            alert("‚úÖ Registre correcte! Ara pots fer login.");
            mostrarPantalla('screen-login'); 
        });

        // L√íGICA DE LOGIN (Simulaci√≥ sense comprovar usuari)
        document.getElementById('form-login').addEventListener('submit', function(e) {
            e.preventDefault();
            // No cal alerta si no vols, per√≤ aqu√≠ fem la redirecci√≥ al fitxer BO:
            window.location.href = "intranet_llistat.html"; 
        });
    </script>

    <footer>
        <div id="footer_intranet"></div>
        <script>
        fetch("footer_intranet.html")
            .then(res => res.text())
            .then(html => {
                document.getElementById("footer_intranet").outerHTML = html;
            });
</script>
    </footer>
</body>
</html>
